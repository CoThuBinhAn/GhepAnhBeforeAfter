<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>C√¥ Th∆∞ B√¨nh An - Gh√©p ·∫¢nh Before After</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Merriweather:wght@300;700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <script>
        tailwind.config = {
            theme: { extend: { colors: { brand: { pink: '#db2777', light: '#fdf2f8', text: '#374151', green: '#416D38' } }, fontFamily: { sans: ['Quicksand', 'sans-serif'], brand: ['Merriweather', 'serif'], dancing: ['Dancing Script', 'cursive'] } } }
        }
    </script>
    <style>
        .scrolling-wrapper { -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none; }
        .scrolling-wrapper::-webkit-scrollbar { display: none; }
        .safe-pb { padding-bottom: max(2.5rem, env(safe-area-inset-bottom)); }
    </style>
</head>
<body class="bg-gray-50 text-gray-700 h-screen w-screen flex flex-col font-sans overflow-hidden">

    <datalist id="tick-rotate"><option value="0"></option></datalist>

    <div class="shrink-0 z-50 bg-white shadow-sm border-b border-gray-100">
        <div class="flex justify-center items-center py-2 bg-gradient-to-r from-green-50/50 via-white to-green-50/50 border-b border-gray-100">
            <div class="flex items-center gap-2 select-none px-2">
                <img src="Logo.png" alt="Logo" class="h-8 md:h-10 w-auto object-contain shrink-0">
                <h1 class="font-dancing text-xl md:text-2xl font-bold text-brand-green whitespace-nowrap">C√¥ Th∆∞ B√¨nh An üåø</h1>
            </div>
        </div>

        <div class="scrolling-wrapper flex items-center justify-start md:justify-center px-3 py-2 gap-3 overflow-x-auto whitespace-nowrap w-full bg-white relative z-50">
            
            <div class="flex gap-1 shrink-0">
                <label class="btn-tool bg-gradient-to-r from-pink-500 to-rose-500 text-white text-[10px] px-3 h-8 shadow-sm hover:scale-105 transition-transform cursor-pointer">
                    <i class="fa-solid fa-cloud-arrow-up"></i><span>Tr√°i</span>
                    <input type="file" id="upload1" accept="image/*" class="hidden">
                </label>
                <label class="btn-tool bg-gradient-to-r from-orange-400 to-amber-500 text-white text-[10px] px-3 h-8 shadow-sm hover:scale-105 transition-transform cursor-pointer">
                    <i class="fa-solid fa-cloud-arrow-up"></i><span>Ph·∫£i</span>
                    <input type="file" id="upload2" accept="image/*" class="hidden">
                </label>
            </div>

            <div class="w-px h-5 bg-gray-200 shrink-0"></div>

            <div class="flex gap-1 items-center shrink-0">
                <div class="flex bg-gray-50 rounded-full border border-gray-200 p-0.5 shrink-0">
                    <button onclick="toggleGrid()" id="gridBtn" class="w-8 h-8 rounded-full flex items-center justify-center text-gray-400 hover:text-blue-500 transition" title="B·∫≠t/T·∫Øt L∆∞·ªõi"><i class="fa-solid fa-border-all text-xs"></i></button>
                    <button onclick="toggleGridColor()" id="gridColorBtn" class="w-8 h-8 rounded-full flex items-center justify-center text-gray-500 hover:text-gray-800 transition" title="ƒê·ªïi m√†u l∆∞·ªõi"><i class="fa-solid fa-circle-half-stroke text-xs"></i></button>
                </div>
                <button onclick="toggleCenterAxis()" id="centerAxisBtn" class="w-9 h-9 rounded-full border flex items-center justify-center text-red-500 border-red-200 bg-red-50 shadow-sm text-xs hover:bg-red-100 transition" title="Tr·ª•c gi·ªØa"><i class="fa-solid fa-grip-lines-vertical"></i></button>
            </div>

            <button onclick="toggleEmojiPicker()" id="emojiBtn" class="w-9 h-9 rounded-full border flex items-center justify-center text-yellow-500 border-yellow-200 bg-white shadow-sm text-xs shrink-0 hover:bg-yellow-50 transition" title="Th√™m Icon"><i class="fa-solid fa-icons"></i></button>

            <div class="w-px h-5 bg-gray-200 shrink-0"></div>

            <button onclick="exportImage()" class="bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold px-4 h-8 rounded-lg text-[10px] shadow-md flex items-center gap-1 shrink-0 hover:shadow-lg transition transform hover:-translate-y-0.5 hover:brightness-105">
                <i class="fa-solid fa-download"></i> T·∫£i
            </button>

            <div class="relative shrink-0">
                <button onclick="toggleAdvancedMenu()" id="advancedBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold px-3 h-8 rounded-lg text-[10px] shadow-sm flex items-center gap-1 transition select-none">
                    <i class="fa-solid fa-bars"></i> N√¢ng cao
                </button>

                <div id="advancedMenu" class="hidden fixed top-0 left-0 w-56 bg-white rounded-xl shadow-[0_10px_40px_rgba(0,0,0,0.2)] border border-gray-100 z-[9999] p-3 flex flex-col gap-3 animate-[fadeIn_0.1s_ease-out]">
                    
                    <div class="flex flex-col gap-1">
                        <span class="text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1">T·ª∑ l·ªá khung</span>
                        <div class="flex bg-gray-50 rounded-lg border border-gray-200 overflow-hidden">
                            <button onclick="setAspectRatio(1, 1); toggleAdvancedMenu()" class="flex-1 py-2 text-[10px] font-bold text-gray-600 hover:bg-green-50 hover:text-green-600 transition border-r border-gray-200">1:1</button>
                            <button onclick="setAspectRatio(4, 5); toggleAdvancedMenu()" class="flex-1 py-2 text-[10px] font-bold text-gray-600 hover:bg-green-50 hover:text-green-600 transition border-r border-gray-200">4:5</button>
                            <button onclick="setAspectRatio(9, 16); toggleAdvancedMenu()" class="flex-1 py-2 text-[10px] font-bold text-gray-600 hover:bg-green-50 hover:text-green-600 transition">9:16</button>
                        </div>
                    </div>
                    
                    <div class="h-px bg-gray-100 w-full"></div>

                    <div class="flex flex-col gap-1">
                        <span class="text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1">C√¥ng c·ª•</span>
                        <div class="grid grid-cols-4 gap-2">
                            <button onclick="toggleFrameLock(); toggleAdvancedMenu()" id="lockBtn" class="aspect-square rounded-lg border flex items-center justify-center text-emerald-600 border-emerald-200 bg-white hover:bg-emerald-50 shadow-sm text-sm transition" title="Kh√≥a/M·ªü khung"><i class="fa-solid fa-lock-open"></i></button>
                            <button onclick="toggleGhostMode(); toggleAdvancedMenu()" id="ghostBtn" class="aspect-square rounded-lg border flex items-center justify-center text-gray-500 border-gray-300 bg-white hover:bg-blue-50 hover:text-blue-500 shadow-sm text-sm transition" title="Soi b√≥ng (Ghost Mode)"><i class="fa-solid fa-eye"></i></button>
                            <button onclick="toggleHelpModal(); toggleAdvancedMenu()" class="aspect-square rounded-lg border border-indigo-200 text-indigo-400 hover:bg-indigo-50 hover:text-indigo-600 flex items-center justify-center transition text-sm" title="Chi ti·∫øt t√≠nh nƒÉng"><i class="fa-solid fa-circle-question"></i></button>
                            <button onclick="openResetModal(); toggleAdvancedMenu()" class="aspect-square rounded-lg border border-rose-200 text-rose-400 hover:bg-rose-50 hover:text-rose-600 flex items-center justify-center transition text-sm" title="X√≥a t·∫•t c·∫£"><i class="fa-solid fa-trash-can"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <main class="flex-grow flex flex-col md:flex-row items-start justify-center p-4 gap-4 min-h-0 bg-gray-50 w-full overflow-y-auto">
        
        <div class="flex-grow flex flex-col items-center w-full md:w-auto min-w-0">
            
            <div id="stageContainer" class="relative shadow-xl rounded-lg overflow-hidden bg-white flex ring-1 ring-gray-200 shrink-1" style="aspect-ratio: 1080/960; max-height: 75vh; max-width: 100%;">
                <div class="absolute left-1/2 top-0 bottom-0 w-px bg-white z-10 transform -translate-x-1/2 pointer-events-none shadow-sm"></div>
                <div id="wrapper1" class="relative w-1/2 h-full canvas-bg group">
                    <canvas id="canvas1" class="w-full h-full block"></canvas>
                    <div id="placeholder1" class="absolute inset-0 flex flex-col items-center justify-center text-gray-400 pointer-events-none">
                        <i class="fa-solid fa-cloud-arrow-up text-3xl mb-2 text-pink-300"></i><span class="text-[10px] font-bold">BEFORE</span>
                    </div>
                </div>
                <div id="wrapper2" class="relative w-1/2 h-full canvas-bg group">
                    <canvas id="canvas2" class="w-full h-full block"></canvas>
                    <div id="placeholder2" class="absolute inset-0 flex flex-col items-center justify-center text-gray-400 pointer-events-none">
                        <i class="fa-solid fa-cloud-arrow-up text-3xl mb-2 text-orange-300"></i><span class="text-[10px] font-bold">AFTER</span>
                    </div>
                </div>
            </div>

            <div id="controlsContainer" class="flex gap-1 mt-2 px-1 shrink-0 z-40 pb-4 justify-center w-full">
                <div class="w-1/2 flex flex-col gap-2">
                    <div class="flex justify-center w-full">
                        <input type="text" id="labelInput1" value="BEFORE" class="w-full text-center font-bold text-gray-500 bg-transparent border-b border-transparent hover:border-pink-300 focus:border-pink-500 focus:text-pink-600 focus:outline-none transition-all uppercase placeholder-gray-300 py-1" placeholder="Nh·∫≠p t√™n...">
                    </div>
                    <div class="w-full bg-white/90 backdrop-blur rounded-xl border border-pink-200 p-2 shadow-sm flex flex-col gap-1">
                        <div class="flex items-center gap-1">
                            <i class="fa-solid fa-magnifying-glass text-pink-400 text-[10px] w-4 text-center shrink-0"></i>
                            <input type="range" id="zoomRange1" min="0.1" max="3" step="0.01" value="1" class="w-full h-1 cursor-pointer accent-pink-500 bg-gray-200 rounded-lg appearance-none">
                        </div>
                        <div class="flex items-center gap-1">
                            <i class="fa-solid fa-rotate text-pink-400 text-[10px] w-4 text-center shrink-0"></i>
                            <input type="range" id="rotateRange1" min="-45" max="45" step="0.5" value="0" list="tick-rotate" class="w-full h-1 cursor-pointer accent-pink-500 bg-gray-200 rounded-lg appearance-none">
                        </div>
                        <input type="number" id="rotateInput1" value="0" class="hidden"><input type="number" id="zoomInput1" value="1.0" class="hidden">
                    </div>
                </div>

                <div class="w-1/2 flex flex-col gap-2">
                    <div class="flex justify-center w-full">
                        <input type="text" id="labelInput2" value="AFTER" class="w-full text-center font-bold text-gray-500 bg-transparent border-b border-transparent hover:border-orange-300 focus:border-orange-500 focus:text-orange-600 focus:outline-none transition-all uppercase placeholder-gray-300 py-1" placeholder="Nh·∫≠p t√™n...">
                    </div>
                    <div class="w-full bg-white/90 backdrop-blur rounded-xl border border-orange-200 p-2 shadow-sm flex flex-col gap-1">
                        <div class="flex items-center gap-1">
                            <i class="fa-solid fa-magnifying-glass text-orange-400 text-[10px] w-4 text-center shrink-0"></i>
                            <input type="range" id="zoomRange2" min="0.1" max="3" step="0.01" value="1" class="w-full h-1 cursor-pointer accent-orange-500 bg-gray-200 rounded-lg appearance-none">
                        </div>
                        <div class="flex items-center gap-1">
                            <i class="fa-solid fa-rotate text-orange-400 text-[10px] w-4 text-center shrink-0"></i>
                            <input type="range" id="rotateRange2" min="-45" max="45" step="0.5" value="0" list="tick-rotate" class="w-full h-1 cursor-pointer accent-orange-500 bg-gray-200 rounded-lg appearance-none">
                        </div>
                        <input type="number" id="rotateInput2" value="0" class="hidden"><input type="number" id="zoomInput2" value="1.0" class="hidden">
                    </div>
                </div>
            </div>
        </div>

        <div class="w-full md:w-72 shrink-0 bg-white rounded-2xl shadow-sm border border-green-100 p-5 h-fit sticky top-2 hidden md:block">
            <h3 class="font-brand font-bold text-xl text-brand-green mb-5 flex items-center gap-2 border-b border-green-50 pb-2">
                <i class="fa-solid fa-book-open"></i> H∆∞·ªõng D·∫´n
            </h3>
            
            <div class="space-y-6">
                <div class="flex gap-3 items-start">
                    <div class="flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-700 font-bold text-xs shrink-0 mt-0.5">1</div>
                    <div>
                        <h4 class="font-bold text-gray-800 text-sm mb-1">T·∫£i ·∫£nh l√™n</h4>
                        <p class="text-xs text-gray-500 leading-relaxed">
                            K√©o th·∫£ h√¨nh v√†o khung ho·∫∑c b·∫•m n√∫t 
                            <span class="inline-flex items-center gap-1 bg-gradient-to-r from-pink-500 to-rose-500 text-white px-2 py-0.5 rounded text-[10px] font-bold"><i class="fa-solid fa-cloud-arrow-up"></i> Tr√°i</span>
                            <span class="inline-flex items-center gap-1 bg-gradient-to-r from-orange-400 to-amber-500 text-white px-2 py-0.5 rounded text-[10px] font-bold mt-1"><i class="fa-solid fa-cloud-arrow-up"></i> Ph·∫£i</span>
                        </p>
                    </div>
                </div>

                <div class="flex gap-3 items-start">
                    <div class="flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-700 font-bold text-xs shrink-0 mt-0.5">2</div>
                    <div>
                        <h4 class="font-bold text-gray-800 text-sm mb-1">Ch·ªânh s·ª≠a</h4>
                        <ul class="text-xs text-gray-500 leading-relaxed space-y-1">
                            <li>‚Ä¢ Ph√≠m <kbd class="bg-gray-100 border border-gray-300 px-1 rounded font-mono text-gray-700">A</kbd> / <kbd class="bg-gray-100 border border-gray-300 px-1 rounded font-mono text-gray-700">S</kbd> ho·∫∑c k√©o thanh b√™n d∆∞·ªõi ƒë·ªÉ <b>Zoom</b>.</li>
                            <li>‚Ä¢ D√πng <b>Chu·ªôt</b> v√† <b>Ph√≠m m≈©i t√™n</b> di chuy·ªÉn h√¨nh.</li>
                        </ul>
                    </div>
                </div>

                <div class="flex gap-3 items-start">
                    <div class="flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-700 font-bold text-xs shrink-0 mt-0.5">3</div>
                    <div>
                        <h4 class="font-bold text-gray-800 text-sm mb-1">Che ·∫£nh</h4>
                        <p class="text-xs text-gray-500 leading-relaxed">
                            Th√™m icon <span class="inline-flex items-center justify-center w-5 h-5 bg-yellow-100 text-yellow-500 rounded-full border border-yellow-200 text-[10px]"><i class="fa-solid fa-icons"></i></span> ƒë·ªÉ che ph·∫ßn c·∫ßn che.
                        </p>
                    </div>
                </div>

                <div class="flex gap-3 items-start">
                    <div class="flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-700 font-bold text-xs shrink-0 mt-0.5">4</div>
                    <div>
                        <h4 class="font-bold text-gray-800 text-sm mb-1">S·ª≠a ch·ªØ</h4>
                        <p class="text-xs text-gray-500 leading-relaxed">
                            B·∫•m v√†o <b>BEFORE</b> / <b>AFTER</b> d∆∞·ªõi h√¨nh ƒë·ªÉ s·ª≠a ch·ªØ n·∫øu c·∫ßn.
                        </p>
                    </div>
                </div>

                <div class="flex gap-3 items-start">
                    <div class="flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-700 font-bold text-xs shrink-0 mt-0.5">5</div>
                    <div>
                        <h4 class="font-bold text-gray-800 text-sm mb-1">T·∫£i v·ªÅ</h4>
                        <p class="text-xs text-gray-500 leading-relaxed">
                            B·∫•m <span class="inline-flex items-center gap-1 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-2 py-0.5 rounded text-[10px] font-bold"><i class="fa-solid fa-download"></i> T·∫£i</span> ƒë·ªÉ t·∫£i h√¨nh.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <div id="helpModal" class="fixed inset-0 bg-gray-900/60 z-[100] hidden flex items-center justify-center p-4 backdrop-blur-sm animate-[fadeIn_0.2s_ease-out]">
        <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full flex flex-col max-h-[90vh] overflow-hidden border border-gray-200">
            
            <div class="bg-gradient-to-r from-indigo-50 to-blue-50 p-4 border-b border-indigo-100 flex justify-between items-center shrink-0">
                <h3 class="text-indigo-800 font-brand font-bold text-lg flex items-center gap-2">
                    <i class="fa-solid fa-circle-info"></i> Gi·∫£i Th√≠ch T√≠nh NƒÉng
                </h3>
                <button onclick="toggleHelpModal()" class="w-8 h-8 rounded-full flex items-center justify-center text-gray-400 hover:bg-white hover:text-gray-600 transition">
                    <i class="fa-solid fa-xmark text-lg"></i>
                </button>
            </div>

            <div class="p-6 overflow-y-auto grid grid-cols-1 md:grid-cols-2 gap-8">
                
                <div>
                    <h4 class="font-bold text-gray-800 border-b border-gray-100 pb-2 mb-3 uppercase text-xs tracking-wider">√ù nghƒ©a Bi·ªÉu t∆∞·ª£ng</h4>
                    <ul class="space-y-3 text-sm text-gray-600">
                        <li class="flex items-center gap-3">
                            <span class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center bg-gray-50 text-gray-500"><i class="fa-solid fa-border-all"></i></span>
                            <div><strong>B·∫≠t/T·∫Øt L∆∞·ªõi:</strong> CƒÉn ch·ªânh ·∫£nh th·∫≥ng h√†ng.</div>
                        </li>
                        <li class="flex items-center gap-3">
                            <span class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center bg-gray-50 text-gray-500"><i class="fa-solid fa-circle-half-stroke"></i></span>
                            <div><strong>ƒê·ªïi m√†u l∆∞·ªõi:</strong> Chuy·ªÉn l∆∞·ªõi ƒêen/Tr·∫Øng ƒë·ªÉ d·ªÖ nh√¨n tr√™n n·ªÅn ·∫£nh t·ªëi/s√°ng.</div>
                        </li>
                        <li class="flex items-center gap-3">
                            <span class="w-8 h-8 rounded-full border border-red-200 flex items-center justify-center bg-red-50 text-red-500"><i class="fa-solid fa-grip-lines-vertical"></i></span>
                            <div><strong>Tr·ª•c gi·ªØa:</strong> ƒê∆∞·ªùng k·∫ª ƒë·ªè gi√∫p canh gi·ªØa 2 ·∫£nh.</div>
                        </li>
                        <li class="flex items-center gap-3">
                            <span class="w-8 h-8 rounded-full border border-yellow-200 flex items-center justify-center bg-yellow-50 text-yellow-500"><i class="fa-solid fa-icons"></i></span>
                            <div><strong>Th√™m Icon:</strong> Ch√®n icon ƒë·ªÉ che m·∫∑t ho·∫∑c trang tr√≠.</div>
                        </li>
                        <li class="flex items-center gap-3">
                            <span class="w-8 h-8 rounded-full border border-emerald-200 flex items-center justify-center bg-white text-emerald-600"><i class="fa-solid fa-lock-open"></i></span>
                            <div><strong>Kh√≥a khung:</strong>
                                <br><span class="text-xs text-gray-400">‚Ä¢ M·ªü: Thay ƒë·ªïi k√≠ch th∆∞·ªõc khung (c·∫Øt ·∫£nh).</span>
                                <br><span class="text-xs text-gray-400">‚Ä¢ Kh√≥a: C·ªë ƒë·ªãnh khung, ch·ªâ ch·ªânh ·∫£nh b√™n trong.</span>
                            </div>
                        </li>
                        <li class="flex items-center gap-3">
                            <span class="w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center bg-white text-gray-500"><i class="fa-solid fa-eye"></i></span>
                            <div><strong>Soi b√≥ng (Ghost):</strong> L√†m m·ªù ·∫£nh ƒë·ªÉ so s√°nh ch·ªìng l·ªõp 2 ·∫£nh Before/After.</div>
                        </li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold text-gray-800 border-b border-gray-100 pb-2 mb-3 uppercase text-xs tracking-wider">Ph√≠m t·∫Øt (B√†n ph√≠m)</h4>
                    <ul class="space-y-4 text-sm text-gray-600">
                        <li class="flex items-center justify-between">
                            <span>Ph√≥ng to / Thu nh·ªè</span>
                            <div class="flex gap-1"><kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">A</kbd> <kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">S</kbd></div>
                        </li>
                        <li class="flex items-center justify-between">
                            <span>Xoay tr√°i / ph·∫£i</span>
                            <div class="flex gap-1"><kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">Q</kbd> <kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">W</kbd></div>
                        </li>
                        
                        <li class="flex items-center justify-between bg-indigo-50 p-2 rounded-lg -mx-2">
                            <span class="font-bold text-indigo-700">TƒÉng t·ªëc ƒë·ªô (Zoom/Xoay)</span>
                            <div class="flex gap-1 items-center"><span class="text-xs mr-1 text-indigo-600">Gi·ªØ</span> <kbd class="px-2 py-1 bg-white border border-indigo-200 rounded font-mono text-xs font-bold text-indigo-600">Shift</kbd></div>
                        </li>

                        <li class="flex items-center justify-between">
                            <span>Di chuy·ªÉn ·∫£nh</span>
                            <div class="flex gap-1"><kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">‚¨ÖÔ∏è</kbd> <kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">‚¨ÜÔ∏è</kbd> <kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">‚¨áÔ∏è</kbd></div>
                        </li>
                        <li class="flex items-center justify-between">
                            <span>Di chuy·ªÉn nhanh</span>
                            <div class="flex gap-1"><span class="text-xs mr-1">Gi·ªØ</span> <kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">Shift</kbd> + <kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">M≈©i t√™n</kbd></div>
                        </li>
                        <li class="flex items-center justify-between">
                            <span>X√≥a ·∫£nh / Icon</span>
                            <div class="flex gap-1"><kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">Delete</kbd></div>
                        </li>
                        <li class="flex items-center justify-between">
                            <span>Ho√†n t√°c (Undo)</span>
                            <div class="flex gap-1"><kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">Ctrl</kbd> + <kbd class="px-2 py-1 bg-gray-100 border rounded font-mono text-xs font-bold">Z</kbd></div>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="p-4 bg-gray-50 border-t border-gray-100 text-center shrink-0">
                <button onclick="toggleHelpModal()" class="px-6 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg font-bold shadow-lg shadow-indigo-200 transition">ƒê√£ Hi·ªÉu</button>
            </div>
        </div>
    </div>
    <div id="saveModal" class="fixed inset-0 bg-gray-900/50 z-[60] hidden flex items-center justify-center p-4 backdrop-blur-sm"><div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6 border border-white/50"><h3 class="text-gray-800 font-bold text-lg mb-4 flex items-center gap-2"><i class="fa-solid fa-floppy-disk text-purple-500"></i> L∆∞u D·ª± √Ån</h3><input type="text" id="saveFileNameInput" class="w-full bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-gray-700 mb-6 focus:border-purple-500 focus:outline-none" placeholder="DuAn_CoThu..."><div class="flex justify-end gap-3"><button onclick="closeSaveModal()" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition font-medium">H·ªßy</button><button onclick="confirmSaveProject()" class="px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-500 transition font-bold shadow-lg shadow-purple-200 flex items-center gap-2">L∆∞u File</button></div></div></div>
    <div id="resetModal" class="fixed inset-0 bg-gray-900/50 z-[60] hidden flex items-center justify-center p-4 backdrop-blur-sm"><div class="bg-white rounded-2xl shadow-xl max-w-sm w-full p-6 border border-white/50 text-center"><h3 class="text-gray-800 font-bold text-lg mb-2">L√†m M·ªõi T·∫•t C·∫£?</h3><div class="flex justify-center gap-3"><button onclick="closeResetModal()" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200">Kh√¥ng</button><button onclick="confirmResetData()" class="px-6 py-2 rounded-lg bg-rose-500 text-white hover:bg-rose-600 shadow-lg">ƒê·ªìng √ù</button></div></div></div>
    
    <div id="emojiPicker" class="hidden fixed z-[100] bg-white border border-gray-200 rounded-xl shadow-2xl p-3 w-80"><div class="grid grid-cols-6 gap-1 max-h-72 overflow-y-auto emoji-grid p-1"><button onclick="addEmoji('‚û°Ô∏è')" class="text-2xl hover:bg-gray-100 p-2 rounded transition">‚û°Ô∏è</button><button onclick="addEmoji('‚¨ÖÔ∏è')" class="text-2xl hover:bg-gray-100 p-2 rounded transition">‚¨ÖÔ∏è</button><button onclick="addEmoji('‚¨ÜÔ∏è')" class="text-2xl hover:bg-gray-100 p-2 rounded transition">‚¨ÜÔ∏è</button><button onclick="addEmoji('‚¨áÔ∏è')" class="text-2xl hover:bg-gray-100 p-2 rounded transition">‚¨áÔ∏è</button><button onclick="addEmoji('‚úÖ')" class="text-2xl hover:bg-green-100 p-2 rounded transition">‚úÖ</button><button onclick="addEmoji('‚ùå')" class="text-2xl hover:bg-red-100 p-2 rounded transition">‚ùå</button><button onclick="addEmoji('üßò‚Äç‚ôÄÔ∏è')" class="text-2xl hover:bg-pink-100 p-2 rounded transition" title="Thi·ªÅn n·ªØ">üßò‚Äç‚ôÄÔ∏è</button><button onclick="addEmoji('üßò‚Äç‚ôÇÔ∏è')" class="text-2xl hover:bg-blue-100 p-2 rounded transition" title="Thi·ªÅn nam">üßò‚Äç‚ôÇÔ∏è</button><button onclick="addEmoji('ü§∏‚Äç‚ôÄÔ∏è')" class="text-2xl hover:bg-orange-100 p-2 rounded transition" title="Nh√†o l·ªôn">ü§∏‚Äç‚ôÄÔ∏è</button><button onclick="addEmoji('üßé‚Äç‚ôÄÔ∏è')" class="text-2xl hover:bg-purple-100 p-2 rounded transition" title="Qu·ª≥ g·ªëi">üßé‚Äç‚ôÄÔ∏è</button><button onclick="addEmoji('üôÜ‚Äç‚ôÄÔ∏è')" class="text-2xl hover:bg-yellow-100 p-2 rounded transition" title="Gi√£n c∆° tay">üôÜ‚Äç‚ôÄÔ∏è</button><button onclick="addEmoji('üí™')" class="text-2xl hover:bg-gray-100 p-2 rounded transition">üí™</button><button onclick="addEmoji('‚ù§Ô∏è')" class="text-2xl hover:bg-red-100 p-2 rounded transition">‚ù§Ô∏è</button><button onclick="addEmoji('üß°')" class="text-2xl hover:bg-orange-100 p-2 rounded transition">üß°</button><button onclick="addEmoji('üíõ')" class="text-2xl hover:bg-yellow-100 p-2 rounded transition">üíõ</button><button onclick="addEmoji('üíö')" class="text-2xl hover:bg-green-100 p-2 rounded transition">üíö</button><button onclick="addEmoji('üíô')" class="text-2xl hover:bg-blue-100 p-2 rounded transition">üíô</button><button onclick="addEmoji('üíú')" class="text-2xl hover:bg-purple-100 p-2 rounded transition">üíú</button><button onclick="addEmoji('üíñ')" class="text-2xl hover:bg-pink-100 p-2 rounded transition">üíñ</button><button onclick="addEmoji('üíó')" class="text-2xl hover:bg-pink-100 p-2 rounded transition">üíó</button><button onclick="addEmoji('üíû')" class="text-2xl hover:bg-pink-100 p-2 rounded transition">üíû</button><button onclick="addEmoji('ü•∞')" class="text-2xl hover:bg-pink-100 p-2 rounded transition">ü•∞</button><button onclick="addEmoji('üòç')" class="text-2xl hover:bg-red-100 p-2 rounded transition">üòç</button><button onclick="addEmoji('üòò')" class="text-2xl hover:bg-red-100 p-2 rounded transition">üòò</button><button onclick="addEmoji('üå∏')" class="text-2xl hover:bg-pink-100 p-2 rounded transition">üå∏</button><button onclick="addEmoji('üî•')" class="text-2xl hover:bg-orange-100 p-2 rounded transition">üî•</button><button onclick="addEmoji('‚ú®')" class="text-2xl hover:bg-yellow-100 p-2 rounded transition">‚ú®</button><button onclick="addEmoji('üìè')" class="text-2xl hover:bg-gray-100 p-2 rounded transition">üìè</button></div></div>
    <div id="toast" class="fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-800/90 backdrop-blur text-white px-5 py-3 rounded-full shadow-xl transition-all duration-300 opacity-0 pointer-events-none z-[70] flex items-center gap-3"><i class="fa-solid fa-circle-check text-green-400"></i><span id="toastMsg" class="font-medium">Th√¥ng b√°o</span></div>

    <script src="script.js"></script>

    <script>
        const stage = document.getElementById('stageContainer');
        const controls = document.getElementById('controlsContainer');
        
        function syncControlWidth() {
            if (stage && controls) {
                // L·∫•y ƒë·ªô r·ªông th·ª±c t·∫ø c·ªßa khung ·∫£nh
                const w = stage.getBoundingClientRect().width;
                // √Åp ƒë·∫∑t ƒë·ªô r·ªông ƒë√≥ cho khung ƒëi·ªÅu khi·ªÉn
                controls.style.width = w + 'px';
            }
        }

        // Ch·∫°y li√™n t·ª•c ƒë·ªÉ b·∫Øt m·ªçi thay ƒë·ªïi (resize m√†n h√¨nh, ƒë·ªïi t·ª∑ l·ªá 1:1, 4:5...)
        setInterval(syncControlWidth, 50);
        window.addEventListener('resize', syncControlWidth);
        syncControlWidth(); // Ch·∫°y ngay khi load
    </script>
</body>
</html>
